CREATE DATABASE ClothingStore;
USE ClothingStore;

-- tblUser
CREATE TABLE tblUser (
    userID INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(100),
    email VARCHAR(100) UNIQUE,
    username VARCHAR(50) UNIQUE,
    password VARCHAR(255),
    role ENUM('customer', 'admin')
);

-- tblAdmin
CREATE TABLE tblAdmin (
    adminID INT PRIMARY KEY AUTO_INCREMENT,
    userID INT,
    FOREIGN KEY (userID) REFERENCES tblUser(userID)
);

-- tblAorder
CREATE TABLE tblAorder (
    orderID INT PRIMARY KEY AUTO_INCREMENT,
    cartID INT,
    o_Status VARCHAR(50),
    o_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- tblClothes
CREATE TABLE tblClothes (
    itemID INT PRIMARY KEY AUTO_INCREMENT,
    title VARCHAR(100),
    description TEXT,
    price DECIMAL(10, 2),
    userID INT,
    ci_Status VARCHAR(50),
    FOREIGN KEY (userID) REFERENCES tblUser(userID)
);

-- tblCart
CREATE TABLE tblCart (
    cartID INT PRIMARY KEY AUTO_INCREMENT,
    userID INT,
    c_Status VARCHAR(50),
    FOREIGN KEY (userID) REFERENCES tblUser(userID)
);

-- tblCartItem
CREATE TABLE tblCartItem (
    cartItemID INT PRIMARY KEY AUTO_INCREMENT,
    cartID INT,
    itemID INT,
    quantity INT,
    FOREIGN KEY (cartID) REFERENCES tblCart(cartID),
    FOREIGN KEY (itemID) REFERENCES tblClothes(itemID)
);

-- tblMessage
CREATE TABLE tblMessage (
    messageID INT PRIMARY KEY AUTO_INCREMENT,
    userID INT,
    content TEXT,
    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (userID) REFERENCES tblUser(userID)
);

-- tblManagement
CREATE TABLE tblManagement (
    managementID INT PRIMARY KEY AUTO_INCREMENT,
    adminID INT,
    itemID INT,
    actionDate TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (adminID) REFERENCES tblAdmin(adminID),
    FOREIGN KEY (itemID) REFERENCES tblClothes(itemID)
);
